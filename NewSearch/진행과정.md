### django searchweb ver1 

#### 1. 구현
- [x] django restframework 적용
- [x] product,index model 생성

#### 2. 테스트 
- [x] test data 가지고 검색웹 확인

#### 문제점 
- token에 없는 키워드로 검색했을때 예외발생

--- 

### django searchweb ver2 

#### 1. 구현
- [x]  절대경로 처리 : 상대경로로 수정
- [x]  토크나이저 로직수정 : -들어있는거 하나 토큰으로 처리하기
- [x]  결측치 확인 : ifnull 확인
- [x]  tf-idf의 feature와 직접 token화 단어가 다름 (-가 사라짐) 
- 원인 : 사이킷런 내부에서 지정한 단어사전으로 만들어서 디폴트 토큰화
- 해결 : TfidfVectorizer의 tokenizer옵션 적용으로 해결

#### 2. 예외처리 
- [x]  검색한 키워드가 토큰에 없는 값이면? (아이폰) , (아이폰 맥북)
- [x]  검색한 키워드의 토큰리스트 값 중에 하나만 없는 토큰에 없는값이면?(아이폰 중고폰)
- [x]  교집합이 없으면 어떻게? (갤럭시 지갑)

#### 3. 성능효율
- [x]  raw data를 pd.read_csv로 읽으면 느림  → pyarrow로 더 빠르게 읽기
- [x]  계속 invert_index를 단순 dict로 가지고 있기엔 너무 큼  → df로 바꿔서 parquet파일로 저장
- [x]  계속 tf-idf matrix를 단순 array로 가지고 있기엔 너무 큼 → df로 바꿔서 parquet파일로 저장
- [ ]  초기세팅(data load)이 너무 느림 
- 해결1 : 처음에 pd.read_csv 말고 pyarrow로 rawdata 파일읽기
- 해결2 : 읽어온 데이터를 bulk create로 모델에 저장 -> 이게 너무 오래걸림
- 해결3 : 이후 모델의 값을 읽어서 (object.values.all) df로 사용

#### 4. 테스트
- [x] test data 가지고 검색웹 확인
- [ ] real data 가지고 검색웹 확인 -> 데이터파일을 bulk create로 모델에 저장하는 방식

#### 문제점 
- 10만건의 데이터를 pyarrow로 읽고, bulk create해서 모델(sqlite)에 넣는게 엄청엄청 오래걸림

--- 
### django searchweb ver3
#### 1. 구현

#### 2. 테스트
- [x] test data 가지고 검색웹 확인
- [x] real data 가지고 검색웹 확인 -> 데이터파일을 rawdata.parquet 파일에 저장하는 방식
- [ ] tf-idf로 계산한 socre값이 확실한가??

#### 3. 성능효율
- [ ]  초기세팅(data load)이 조금 느림 
- 해결1 : 처음에 pyarrow로 rawdata 파일읽기
- 해결2 : 모델없이 rawdata.parquet 파일로 디렉토리에 저장 -> 최대1분 소요 
- 해결3 : 이후 parquet파일을 read해서 df로 사용 -> 최대10초 소요
- [ ]  TfidfVectorizer 메모리이슈
- 임시해결 : TfidfVectorizer의 max_features 옵션적용으로 가장 많이 나온 단어 n개만 tf-idf feature로 지정함

#### 4. 예외처리 
- [x] max_features 옵션을 적용하다보니 검색한 키워드의 토큰이 tf-idf feature에 없는 상황 발생
- 임시해결 : 검색한 키워드의 토큰이 tfidv_df의 column에 포함되는지 확인 

#### 문제점
- data ,index , tf-idf 결과를 다 parquet파일을 내부 디렉토리에 저장해서 파일명 및 경로를 지정해줘야함
- 초기세팅 진행여부를 디렉토리에 존재하는 파일의 개수로 확인.. -> 더 좋은 방법은? s3에 저장하기?

#### 기타. 코드정리
- [ ] 주석달기
- [ ] 모듈화
- [ ] 코드정리 : 변수명정리, 불필요한 파일이나 코드삭제하기
- [ ] 사용 패키지 : django, djangorestframework, sklearn, padnas, pyarrow

#### 기타. 어려웠던점이나 느낀점
- konly 자연어 패키지나 elasticSearch 오픈소스로 쉽게 가려고하다가 오히려 시간낭비 -> 순수하게 해결방법 찾자